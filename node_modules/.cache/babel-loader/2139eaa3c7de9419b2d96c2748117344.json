{"ast":null,"code":"import _objectSpread from\"C:/Users/HP/Desktop/Main-WFM/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"C:/Users/HP/Desktop/Main-WFM/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"C:/Users/HP/Desktop/Main-WFM/frontend/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"C:/Users/HP/Desktop/Main-WFM/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"C:/Users/HP/Desktop/Main-WFM/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Users/HP/Desktop/Main-WFM/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/HP/Desktop/Main-WFM/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/HP/Desktop/Main-WFM/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/HP/Desktop/Main-WFM/frontend/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Client from'./Contentful';//This is context for all the consumers\nimport{jsx as _jsx}from\"react/jsx-runtime\";var RoomContext=/*#__PURE__*/React.createContext();var RoomProvider=/*#__PURE__*/function(_Component){_inherits(RoomProvider,_Component);var _super=_createSuper(RoomProvider);function RoomProvider(){var _this;_classCallCheck(this,RoomProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={rooms:[],sortedRooms:[],featuredRooms:[],bookedRooms:[],loading:true,type:'all',capacity:1,slug:'single-economy',price:0,minPrice:0,maxPrice:0,bookId:0,place:\"Shimla\"// breakfast:false,\n// pets:false\n};_this.getData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,rooms,featuredRooms,maxPrice,min,max,bookId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Client.getEntries({content_type:\"workFromMountains\",// order: 'sys.createdAt'\norder:'fields.price'});case 3:response=_context.sent;rooms=_this.formatData(response.items);featuredRooms=rooms.filter(function(room){return room.featured===true;});maxPrice=Math.max.apply(Math,_toConsumableArray(rooms.map(function(item){return item.price;})));//Calculate random booking-Id\nmin=1;max=100;bookId=Math.floor(min+Math.random()*(max-min));//states updated\n_this.setState({rooms:rooms,featuredRooms:featuredRooms,sortedRooms:rooms,loading:false,price:maxPrice,slug:'None',maxPrice:maxPrice,bookId:bookId,bookedRooms:rooms// place,\n//   maxSize\n});_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));_this.getRoom=function(slug){var tempRooms=_toConsumableArray(_this.state.rooms);var room=tempRooms.find(function(room){return room.slug===slug;});return room;};_this.handleChange=function(event){var target=event.target;var value=event.type==='checkbox'?target.checked:target.value;var name=event.target.name;_this.setState(_defineProperty({},name,value),_this.filterRooms);//   console.log(type,name,value);\n};_this.filterRooms=function(){//   \nvar _this$state=_this.state,rooms=_this$state.rooms,type=_this$state.type,capacity=_this$state.capacity,price=_this$state.price,place=_this$state.place;//All the rooms\nvar tempRooms=_toConsumableArray(rooms);//Transfor values as the number in capacity get changed to string\ncapacity=parseInt(capacity);//Transfor values as the number in price get changed to string\nprice=parseInt(price);//filter by Type\nif(type!=='all'){tempRooms=tempRooms.filter(function(room){return room.type===type;});}//filter by Capacity\nif(capacity!==1){tempRooms=tempRooms.filter(function(room){return room.capacity>=capacity;});}//filter by Place\nif(place!=='None'){tempRooms=tempRooms.filter(function(room){return room.place===place;});}//filter by Price\ntempRooms=tempRooms.filter(function(room){return room.price<=price;});_this.setState({sortedRooms:tempRooms});};_this.bookedRooms=function(){var rooms=_this.state.rooms;var tempRooms=_toConsumableArray(rooms);// tempRooms = tempRooms.filter(room =>room.name ===name)  \n// console.log(\"Hello\");\n_this.setState({bookedRooms:tempRooms});};return _this;}_createClass(RoomProvider,[{key:\"componentDidMount\",value:function componentDidMount(){this.getData();}},{key:\"formatData\",value:function formatData(items){var tempItems=items.map(function(item){var id=item.sys.id;var images=item.fields.images.map(function(image){return image.fields.file.url;});var room=_objectSpread(_objectSpread({},item.fields),{},{images:images,id:id});return room;});return tempItems;}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(RoomContext.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{getRoom:this.getRoom,handleChange:this.handleChange}),children:this.props.children});}}]);return RoomProvider;}(Component);var RoomConsumer=RoomContext.Consumer;//Higher Order Component\nexport function withRoomConsumer(Component){return function ConsumerWrapper(props){return/*#__PURE__*/_jsx(RoomConsumer,{children:function children(value){return/*#__PURE__*/_jsx(Component,_objectSpread(_objectSpread({},props),{},{context:value}));}});};}export{RoomProvider,RoomConsumer,RoomContext};","map":{"version":3,"sources":["C:/Users/HP/Desktop/Main-WFM/frontend/src/context.js"],"names":["React","Component","Client","RoomContext","createContext","RoomProvider","state","rooms","sortedRooms","featuredRooms","bookedRooms","loading","type","capacity","slug","price","minPrice","maxPrice","bookId","place","getData","getEntries","content_type","order","response","formatData","items","filter","room","featured","Math","max","map","item","min","floor","random","setState","console","log","getRoom","tempRooms","find","handleChange","event","target","value","checked","name","filterRooms","parseInt","tempItems","id","sys","images","fields","image","file","url","props","children","RoomConsumer","Consumer","withRoomConsumer","ConsumerWrapper"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Client from './Contentful';\r\n\r\n//This is context for all the consumers\r\nconst RoomContext = React.createContext();\r\n\r\nclass RoomProvider extends Component {  \r\n  \r\n  state = {\r\n    rooms: [],\r\n    sortedRooms: [],\r\n    featuredRooms: [],\r\n    bookedRooms:[],\r\n    loading: true,\r\n    type:'all',\r\n    capacity:1,\r\n    slug:'single-economy',\r\n    price:0,\r\n    minPrice:0,\r\n    maxPrice:0,\r\n    bookId:0,\r\n    place:\"Shimla\",\r\n    // breakfast:false,\r\n    // pets:false\r\n  };\r\n\r\n\r\n  \r\n  //getData\r\n\r\n  getData = async () =>{\r\n    try {\r\n      let response = await Client.getEntries({\r\n        content_type:\"workFromMountains\",\r\n        // order: 'sys.createdAt'\r\n        order:'fields.price'\r\n      });\r\n      let rooms = this.formatData(response.items);\r\n      let featuredRooms = rooms.filter(room => room.featured === true);\r\n      let maxPrice = Math.max(...rooms.map(item =>item.price))\r\n  \r\n      //Calculate random booking-Id\r\n      const min = 1;\r\n      const max = 100;\r\n      const bookId = Math.floor(min + (Math.random() * (max - min)));\r\n  \r\n  \r\n      \r\n      //states updated\r\n      this.setState({\r\n        rooms,\r\n        featuredRooms,\r\n        sortedRooms: rooms,      \r\n        loading: false,\r\n        price:maxPrice,\r\n        slug:'None',\r\n        maxPrice,\r\n        bookId:bookId,\r\n        bookedRooms:rooms,\r\n        // place,\r\n      //   maxSize\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getData()\r\n    \r\n  }\r\n\r\n  formatData(items) {\r\n    let tempItems = items.map((item) => {\r\n      let id = item.sys.id;\r\n      let images = item.fields.images.map((image) => image.fields.file.url);\r\n      let room = { ...item.fields, images, id };\r\n      return room;\r\n    });\r\n    return tempItems;\r\n  }\r\n\r\n  getRoom = (slug) => {\r\n      let tempRooms = [...this.state.rooms];\r\n      const room = tempRooms.find(room => room.slug === slug)\r\n      return room;\r\n  }\r\n\r\n\r\n  handleChange= event =>{\r\n      const target = event.target\r\n      const value  = event.type ==='checkbox'? target.checked : target.value\r\n      const name=event.target.name\r\n      this.setState({\r\n          [name]:value\r\n      },this.filterRooms)\r\n     \r\n    //   console.log(type,name,value);\r\n  }\r\n\r\n\r\n\r\n  filterRooms = () =>{\r\n    //   \r\n    let {rooms,type,capacity,price,place} = this.state;\r\n\r\n    //All the rooms\r\n    let tempRooms =[...rooms];\r\n\r\n    //Transfor values as the number in capacity get changed to string\r\n    capacity=parseInt(capacity)\r\n\r\n\r\n    //Transfor values as the number in price get changed to string\r\n    price=parseInt(price)\r\n\r\n\r\n    //filter by Type\r\n    if(type !== 'all'){\r\n        tempRooms = tempRooms.filter(room => room.type === type)\r\n    }\r\n\r\n    //filter by Capacity\r\n    if(capacity !== 1){\r\n        tempRooms = tempRooms.filter(room =>room.capacity >=capacity)\r\n    }\r\n\r\n    //filter by Place\r\n    if(place !== 'None'){\r\n        tempRooms = tempRooms.filter(room => room.place === place)\r\n    }\r\n\r\n    //filter by Price\r\n    \r\n        tempRooms = tempRooms.filter(room =>room.price <=price)\r\n    \r\n\r\n    this.setState({\r\n        sortedRooms:tempRooms\r\n    })\r\n\r\n  }\r\n\r\n  bookedRooms=()=>{\r\n    let {rooms} = this.state;\r\n    let tempRooms =[...rooms];  \r\n    // tempRooms = tempRooms.filter(room =>room.name ===name)  \r\n    // console.log(\"Hello\");\r\n    this.setState({\r\n      bookedRooms:tempRooms\r\n  })\r\n  }\r\n\r\n \r\n\r\n  render() {\r\n    return (\r\n      <RoomContext.Provider value={{ ...this.state,getRoom:this.getRoom,handleChange:this.handleChange}}>\r\n        {this.props.children}\r\n      </RoomContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nconst RoomConsumer = RoomContext.Consumer;\r\n\r\n//Higher Order Component\r\nexport function withRoomConsumer(Component){\r\n    return function ConsumerWrapper(props){\r\n        return <RoomConsumer>\r\n            {value => <Component {...props} context={value}/>}\r\n        </RoomConsumer>\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport { RoomProvider, RoomConsumer, RoomContext };\r\n"]},"metadata":{},"sourceType":"module"}