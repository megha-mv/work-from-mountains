{"ast":null,"code":"import _objectSpread from\"C:/Users/HP/Desktop/Main-WFM/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{authHeader}from'../helpers/auth-header';export var userService={login:login,logout:logout,register:register,getAll:getAll,getById:getById,update:update,delete:_delete};function login(username,password){var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})};return fetch(\"/users/authenticate\",requestOptions).then(handleResponse).then(function(user){// store user details and jwt token in local storage to keep user logged in between page refreshes\nlocalStorage.setItem('user',JSON.stringify(user));return user;});}function logout(){// remove user from local storage to log user out\nlocalStorage.removeItem('user');}function getAll(){var requestOptions={method:'GET',headers:authHeader()};return fetch(\"/users\",requestOptions).then(handleResponse);}function getById(id){var requestOptions={method:'GET',headers:authHeader()};return fetch(\"/users/\".concat(id),requestOptions).then(handleResponse);}function register(user){var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(user)};return fetch(\"/users/register\",requestOptions).then(handleResponse);}function update(user){var requestOptions={method:'PUT',headers:_objectSpread(_objectSpread({},authHeader()),{},{'Content-Type':'application/json'}),body:JSON.stringify(user)};return fetch(\"/users/\".concat(user.id),requestOptions).then(handleResponse);;}// prefixed function name with underscore because delete is a reserved word in javascript\nfunction _delete(id){var requestOptions={method:'DELETE',headers:authHeader()};return fetch(\"/users/\".concat(id),requestOptions).then(handleResponse);}function handleResponse(response){return response.text().then(function(text){var data=text&&JSON.parse(text);if(!response.ok){if(response.status===401){// auto logout if 401 response returned from api\nlogout();window.location.reload(true);}var error=data&&data.message||response.statusText;return Promise.reject(error);}return data;});}","map":{"version":3,"sources":["C:/Users/HP/Desktop/Main-WFM/frontend/src/services/userservices.js"],"names":["authHeader","userService","login","logout","register","getAll","getById","update","delete","_delete","username","password","requestOptions","method","headers","body","JSON","stringify","fetch","then","handleResponse","user","localStorage","setItem","removeItem","id","response","text","data","parse","ok","status","window","location","reload","error","message","statusText","Promise","reject"],"mappings":"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","sourcesContent":["import { authHeader } from '../helpers/auth-header';\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    register,\r\n    getAll,\r\n    getById,\r\n    update,\r\n    delete: _delete\r\n};\r\n\r\nfunction login(username, password) {\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ username, password })\r\n    };\r\n\r\n    return fetch(`/users/authenticate`, requestOptions)\r\n        .then(handleResponse)\r\n        .then(user => {\r\n            // store user details and jwt token in local storage to keep user logged in between page refreshes\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n\r\n            return user;\r\n        });\r\n}\r\n\r\nfunction logout() {\r\n    // remove user from local storage to log user out\r\n    localStorage.removeItem('user');\r\n}\r\n\r\nfunction getAll() {\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`/users`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction getById(id) {\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`/users/${id}`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction register(user) {\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(user)\r\n    };\r\n\r\n    return fetch(`/users/register`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction update(user) {\r\n    const requestOptions = {\r\n        method: 'PUT',\r\n        headers: { ...authHeader(), 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(user)\r\n    };\r\n\r\n    return fetch(`/users/${user.id}`, requestOptions).then(handleResponse);;\r\n}\r\n\r\n// prefixed function name with underscore because delete is a reserved word in javascript\r\nfunction _delete(id) {\r\n    const requestOptions = {\r\n        method: 'DELETE',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`/users/${id}`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction handleResponse(response) {\r\n    return response.text().then(text => {\r\n        const data = text && JSON.parse(text);\r\n        if (!response.ok) {\r\n            if (response.status === 401) {\r\n                // auto logout if 401 response returned from api\r\n                logout();\r\n                window.location.reload(true);\r\n            }\r\n\r\n            const error = (data && data.message) || response.statusText;\r\n            return Promise.reject(error);\r\n        }\r\n\r\n        return data;\r\n    });\r\n}"]},"metadata":{},"sourceType":"module"}